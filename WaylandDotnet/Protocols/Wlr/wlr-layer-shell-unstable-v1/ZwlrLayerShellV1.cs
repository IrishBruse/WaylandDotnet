// <auto-generated>
// This file was generated from wlr-layer-shell-unstable-v1.xml
// Stability: Wlr
// Link: https://wayland.app/protocols/wlr-layer-shell-unstable-v1
// </auto-generated>

#nullable enable
#pragma warning disable CS1591
#pragma warning disable CS0108
#pragma warning disable CS8604

namespace WaylandDotnet.Wlr;

using System;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
using System.Runtime.InteropServices.Marshalling;
using System.Text;
using WaylandDotnet;
using WaylandDotnet.Internal;
using WaylandDotnet.Stable;
using WaylandDotnet.Wlr;

/// <summary>
/// zwlr_layer_shell_v1
/// <para> create surfaces that are layers of the desktop </para>
/// <para> Version: 5 </para>
/// <see>https://wayland.app/protocols/wlr-layer-shell-unstable-v1/#zwlr_layer_shell_v1</see>
/// </summary>
public sealed partial class ZwlrLayerShellV1 : WaylandObject, IWaylandObjectFactory<ZwlrLayerShellV1>
{
    public const string InterfaceName = "zwlr_layer_shell_v1";
    public static string _StaticInterfaceName => "zwlr_layer_shell_v1";
    public const int InterfaceVersion = 5;

    public ZwlrLayerShellV1(IntPtr handle, WlDisplay display) : base(handle, display, InterfaceName, InterfaceVersion)
    {
    }
    /// <summary>  </summary>
    public enum Error : uint
    {
        /// <summary>
        /// wl_surface has another role
        /// </summary>
        Role = 0,
        /// <summary>
        /// layer value is invalid
        /// </summary>
        InvalidLayer = 1,
        /// <summary>
        /// wl_surface has a buffer attached or committed
        /// </summary>
        AlreadyConstructed = 2,
    }

    /// <summary> available layers for surfaces </summary>
    public enum Layer : uint
    {
        /// <summary>
        ///
        /// </summary>
        Background = 0,
        /// <summary>
        ///
        /// </summary>
        Bottom = 1,
        /// <summary>
        ///
        /// </summary>
        Top = 2,
        /// <summary>
        ///
        /// </summary>
        Overlay = 3,
    }

    /// <summary>
    /// Create a layer_surface from a surface
    /// <para>
    /// <br/>
    /// Create a layer surface for an existing surface. This assigns the role of<br/>
    /// layer_surface, or raises a protocol error if another role is already<br/>
    /// assigned.<br/>
    /// <br/>
    /// Creating a layer surface from a wl_surface which has a buffer attached<br/>
    /// or committed is a client error, and any attempts by a client to attach<br/>
    /// or manipulate a buffer prior to the first layer_surface.configure call<br/>
    /// must also be treated as errors.<br/>
    /// <br/>
    /// After creating a layer_surface object and setting it up, the client<br/>
    /// must perform an initial commit without any buffer attached.<br/>
    /// The compositor will reply with a layer_surface.configure event.<br/>
    /// The client must acknowledge it and is then allowed to attach a buffer<br/>
    /// to map the surface.<br/>
    /// <br/>
    /// You may pass NULL for output to allow the compositor to decide which<br/>
    /// output to use. Generally this will be the one that the user most<br/>
    /// recently interacted with.<br/>
    /// <br/>
    /// Clients can specify a namespace that defines the purpose of the layer<br/>
    /// surface.<br/>
    /// <br/>
    /// </para>
    /// </summary>
    public unsafe ZwlrLayerSurfaceV1 GetLayerSurface(WlSurface surface, WlOutput? output, uint layer, string _namespace)
    {
        CheckDisposed();

        var args = stackalloc WlArgument[5];
        args[0].o = (WlObject*)IntPtr.Zero;
        args[1].o = (WlObject*)(surface?.Handle ?? IntPtr.Zero);
        args[2].o = (WlObject*)(output?.Handle ?? IntPtr.Zero);
        args[3].u = layer;
        args[4].s = Utf8StringMarshaller.ConvertToUnmanaged(_namespace);

        const uint opcode = 0;

        var newProxy = WaylandNative.ProxyMarshalArrayFlags(
            Handle,
            opcode,
            WaylandInterfaces.ZwlrLayerSurfaceV1,
            (uint)WaylandInterfaces.ZwlrLayerSurfaceV1->Version,
            0,
            (nint)args
        );

        return new ZwlrLayerSurfaceV1(newProxy, Display);
    }

    /// <summary>
    /// Destroy the layer_shell object
    /// <para>
    /// <br/>
    /// This request indicates that the client will not use the layer_shell<br/>
    /// object any more. Objects that have been created through this instance<br/>
    /// are not affected.<br/>
    /// <br/>
    /// </para>
    /// </summary>
    public unsafe void Destroy()
    {
        CheckDisposed();

        var args = stackalloc WlArgument[0];

        const uint opcode = 1;

        var newProxy = WaylandNative.ProxyMarshalArrayFlags(
            Handle,
            opcode,
            (WlInterface*)IntPtr.Zero,
            0,
            0,
            (nint)args
        );
    }

    public static ZwlrLayerShellV1 Create(nint handle, WlDisplay display)
    {
        return new ZwlrLayerShellV1(handle, display);
    }
}
