// <auto-generated>
// This file was generated from wayland.xml
// Stability: Core
// Link: https://wayland.app/protocols/wayland
// </auto-generated>

#nullable enable
#pragma warning disable CS1591
#pragma warning disable CS0108
#pragma warning disable CS8604

namespace WaylandDotnet;

using System;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
using System.Runtime.InteropServices.Marshalling;
using System.Text;
using WaylandDotnet;
using WaylandDotnet.Internal;
using WaylandDotnet.Stable;
using WaylandDotnet.Wlr;

/// <summary>
/// wl_subcompositor
/// <para> sub-surface compositing </para>
/// <para> Version: 1 </para>
/// <see>https://wayland.app/protocols/wayland/#wl_subcompositor</see>
/// </summary>
public sealed partial class WlSubcompositor : WaylandObject, IWaylandObjectFactory<WlSubcompositor>
{
    public const string InterfaceName = "wl_subcompositor";
    public static string _StaticInterfaceName => "wl_subcompositor";
    public const int InterfaceVersion = 1;


    #region GenerateConstructor

    public WlSubcompositor(IntPtr handle, WlDisplay display) : base(handle, display, InterfaceName, InterfaceVersion)
    {
    }

    #endregion // GenerateConstructor


    #region GenerateEnums

    /// <summary>  </summary>
    public enum Error : uint
    {
        /// <summary>
        /// the to-be sub-surface is invalid
        /// </summary>
        BadSurface = 0,
        /// <summary>
        /// the to-be sub-surface parent is invalid
        /// </summary>
        BadParent = 1,
    }


    #endregion // GenerateEnums


    #region GenerateRequests

    /// <summary>
    /// Unbind from the subcompositor interface
    /// <para>
    /// <br/>
    /// Informs the server that the client will not be using this<br/>
    /// protocol object anymore. This does not affect any other<br/>
    /// objects, wl_subsurface objects included.<br/>
    /// <br/>
    /// </para>
    /// </summary>
    public unsafe void Destroy()
    {
        CheckDisposed();

        var args = stackalloc WlArgument[0];

        const uint opcode = 0;

        var newProxy = WaylandNative.ProxyMarshalArrayFlags(
            Handle,
            opcode,
            (WlInterface*)IntPtr.Zero,
            0,
            0,
            (nint)args
        );
    }

    /// <summary>
    /// Give a surface the role sub-surface
    /// <para>
    /// <br/>
    /// Create a sub-surface interface for the given surface, and<br/>
    /// associate it with the given parent surface. This turns a<br/>
    /// plain wl_surface into a sub-surface.<br/>
    /// <br/>
    /// The to-be sub-surface must not already have another role, and it<br/>
    /// must not have an existing wl_subsurface object. Otherwise the<br/>
    /// bad_surface protocol error is raised.<br/>
    /// <br/>
    /// Adding sub-surfaces to a parent is a double-buffered operation on the<br/>
    /// parent (see wl_surface.commit). The effect of adding a sub-surface<br/>
    /// becomes visible on the next time the state of the parent surface is<br/>
    /// applied.<br/>
    /// <br/>
    /// The parent surface must not be one of the child surface's descendants,<br/>
    /// and the parent must be different from the child surface, otherwise the<br/>
    /// bad_parent protocol error is raised.<br/>
    /// <br/>
    /// This request modifies the behaviour of wl_surface.commit request on<br/>
    /// the sub-surface, see the documentation on wl_subsurface interface.<br/>
    /// <br/>
    /// </para>
    /// </summary>
    public unsafe WlSubsurface GetSubsurface(WlSurface surface, WlSurface parent)
    {
        CheckDisposed();

        var args = stackalloc WlArgument[3];
        args[0].o = (WlObject*)IntPtr.Zero;
        args[1].o = (WlObject*)(surface?.Handle ?? IntPtr.Zero);
        args[2].o = (WlObject*)(parent?.Handle ?? IntPtr.Zero);

        const uint opcode = 1;

        var newProxy = WaylandNative.ProxyMarshalArrayFlags(
            Handle,
            opcode,
            WaylandInterfaces.WlSubsurface,
            (uint)WaylandInterfaces.WlSubsurface->Version,
            0,
            (nint)args
        );

        return new WlSubsurface(newProxy, Display);
    }


    #endregion // GenerateRequests

    public static WlSubcompositor Create(nint handle, WlDisplay display)
    {
        return new WlSubcompositor(handle, display);
    }
}
